{"version":3,"sources":["webpack:///../api/model.ts","webpack:///../api/index.ts","webpack:///../component/SEO.tsx","webpack:///../component/Header.tsx","webpack:///../component/Footer.tsx","webpack:///../component/Container.tsx","webpack:///../component/ThemeToggle.tsx","webpack:///../component/Link.tsx","webpack:///../component/NotFound.tsx","webpack:///../component/BackToTop.tsx","webpack:///../component/svg/Github.tsx","webpack:///../component/svg/Mail.tsx","webpack:///../hook/useSiteMeta.ts","webpack:///../hook/useTheme.ts","webpack:///../hook/usePaths.ts","webpack:///./Photography/View.tsx","webpack:///./Photography/index.ts","webpack:///../share/createPage.tsx","webpack:///../store/index.ts"],"names":["apiPipeline","createApiPipelineWithUrl","api","input","invoke","path","fetchData","store","list","context","promises","forEach","push","fetchNotes","fetchTags","fetchPictures","fetchNote","Promise","all","catch","err","dispatch","type","payload","stack","message","then","res","notes","tags","pictures","name","note","SEO","metadata","useSelector","state","meta","Helmet","title","content","description","image","Header","paths","usePaths","history","useHistory","_paths","slice","tail","pop","className","map","href","key","onClick","event","preventDefault","aria-label","accessKey","Github","width","height","Mail","ThemeToggle","Footer","year","Date","getUTCFullYear","Container","children","useStore","getState","errors","length","notfound","NotFound","mode","toggle","useTheme","Link","style","blank","target","textAlign","fontSize","fontWeight","BackToTop","window","scrollTo","top","props","viewBox","d","ThemeMode","setMode","useState","Light","isFirst","setIsFirst","useEffect","getThemeMode","__setTheme","Dark","localStorage","getItem","__theme_key__","setPaths","Photography","Photos","displayPictures","years","Object","keys","sort","a","b","Number","PhotosByYear","months","id","month","PhotosByMonth","groupedPictures","result","i","groupPictures","group","Array","isArray","DoublePhoto","left","right","SinglePhoto","picture","Photo","ImageWrapper","styled","loadingAnimation","keyframes","Placeholder","StyledImage","url","location","date","dateStr","dayjs","format","LazyImage","src","alt","refPlaceholder","React","removePlaceholder","current","remove","ref","onLoad","onError","createPage","params","createStore","beforeCreate","create","onlyYear","picturesByYear","displayNotes","View","noopPage","assign","createNoopStore","created","beforeDestory","destroyed","standardizePage","page","creater","cp","Layout","ssr","PageView","initialState","noteSet","language","author","reducer","action","value","concat","reduxStore","composeWithDevTools","__UNSAFE_SET_STATE__"],"mappings":"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","file":"js/photography-4df8fc.js","sourcesContent":["/**\n * This file was generated by farrow-api\n * Don't modify it manually\n */\n\nimport { createApiPipelineWithUrl } from 'farrow-api-client'\n\n/**\n * {@label GetNoteInput}\n */\nexport type GetNoteInput = {\n  /**\n   * @remarks Note name\n   */\n  name: string\n}\n\n/**\n * {@label GetNoteSuccess}\n */\nexport type GetNoteSuccess = {\n  type: 'GetNoteSuccess'\n  /**\n   * @remarks Note content\n   */\n  note: string\n}\n\n/**\n * {@label NoteNotExist}\n */\nexport type NoteNotExist = {\n  type: 'NoteNotExist'\n  /**\n   * @remarks NoteNotExist message\n   */\n  message: string\n}\n\n/**\n * {@label NoteIsBroken}\n */\nexport type NoteIsBroken = {\n  type: 'NoteIsBroken'\n  /**\n   * @remarks NoteIsBroken message\n   */\n  message: string\n}\n\n/**\n * {@label SystemError}\n */\nexport type SystemError = {\n  type: 'SystemError'\n  /**\n   * @remarks SystemError message\n   */\n  message: string\n}\n\n/**\n * {@label GetNotesSuccess}\n */\nexport type GetNotesSuccess = {\n  type: 'GetNotesSuccess'\n  /**\n   * @remarks Note list\n   */\n  notes: Note[]\n}\n\n/**\n * {@label Note}\n */\nexport type Note = {\n  /**\n   * @remarks Note id\n   */\n  id: number\n  /**\n   * @remarks Note title\n   */\n  title: string\n  /**\n   * @remarks Note name\n   */\n  name: string\n  /**\n   * @remarks Note description\n   */\n  description: string\n  /**\n   * @remarks Note createTime\n   */\n  createTime: string\n  /**\n   * @remarks Note modifiedTime\n   */\n  modifiedTime: string\n  /**\n   * @remarks Note tags\n   */\n  tags: number[]\n  /**\n   * @remarks Note tip\n   */\n  tip: string\n}\n\n/**\n * {@label GetTagsSuccess}\n */\nexport type GetTagsSuccess = {\n  type: 'GetTagsSuccess'\n  /**\n   * @remarks tag list\n   */\n  tags: Tag[]\n}\n\n/**\n * {@label Tag}\n */\nexport type Tag = {\n  /**\n   * @remarks Tag id\n   */\n  id: number\n  /**\n   * @remarks Tag title\n   */\n  title: string\n  /**\n   * @remarks Tag name\n   */\n  name: string\n  /**\n   * @remarks Tag description\n   */\n  description: string\n}\n\n/**\n * {@label GetPicturesSuccess}\n */\nexport type GetPicturesSuccess = {\n  type: 'GetPicturesSuccess'\n  /**\n   * @remarks picture list\n   */\n  pictures: Record<string, Record<string, Picture[]>>\n}\n\n/**\n * {@label Picture}\n */\nexport type Picture = {\n  /**\n   * @remarks Picture id\n   */\n  id: number\n  /**\n   * @remarks Picture name\n   */\n  name: string\n  /**\n   * @remarks Picture location\n   */\n  location: string\n  /**\n   * @remarks Picture date\n   */\n  date: string\n  /**\n   * @remarks Picture url\n   */\n  url: string\n}\n\nexport const url = '/api'\n\nexport const apiPipeline = createApiPipelineWithUrl(url)\n\nexport const api = {\n  /**\n   * @remarks get note content\n   */\n  getNote: (input: GetNoteInput) =>\n    apiPipeline.invoke({ path: ['getNote'], input }) as Promise<\n      GetNoteSuccess | NoteNotExist | NoteIsBroken | SystemError\n    >,\n  /**\n   * @remarks get notes\n   */\n  getNotes: (input: {}) =>\n    apiPipeline.invoke({ path: ['getNotes'], input }) as Promise<\n      GetNotesSuccess | SystemError\n    >,\n  /**\n   * @remarks get tags\n   */\n  getTags: (input: {}) =>\n    apiPipeline.invoke({ path: ['getTags'], input }) as Promise<\n      GetTagsSuccess | SystemError\n    >,\n  /**\n   * @remarks get pictures\n   */\n  getPictures: (input: {}) =>\n    apiPipeline.invoke({ path: ['getPictures'], input }) as Promise<\n      GetPicturesSuccess | SystemError\n    >,\n}\n","import { api } from './model'\n\nimport type { Context } from 'react-torch'\nimport type { Store } from 'redux'\nimport type { State, Action } from 'client'\n\ntype Input = '/notes' | '/tags' | '/pictures' | string\n\nexport const fetchData = async (\n  store: Store<State, Action>,\n  list: Input[],\n  context: Context\n) => {\n  const promises: Promise<any>[] = []\n\n  list.forEach((input) => {\n    if (typeof input === 'string') {\n      if (input === '/notes') {\n        promises.push(fetchNotes(store))\n      } else if (input === '/tags') {\n        promises.push(fetchTags(store))\n      } else if (input === '/pictures') {\n        promises.push(fetchPictures(store))\n      } else {\n        promises.push(fetchNote(store, input))\n      }\n    }\n  })\n\n  return Promise.all(promises).catch((err) => {\n    store.dispatch({\n      type: 'SET_ERRORS',\n      payload: [err.stack || err.message],\n    })\n  })\n}\n\nconst fetchNotes = async (store: Store<State, Action>) => {\n  return api.getNotes({}).then((res) => {\n    switch (res.type) {\n      case 'GetNotesSuccess': {\n        store.dispatch({\n          type: 'SET_NOTES',\n          payload: res.notes,\n        })\n        break\n      }\n      case 'SystemError': {\n        store.dispatch({\n          type: 'SET_ERRORS',\n          payload: [res.message],\n        })\n        break\n      }\n    }\n  })\n}\n\nconst fetchTags = async (store: Store<State, Action>) => {\n  return api.getTags({}).then((res) => {\n    switch (res.type) {\n      case 'GetTagsSuccess': {\n        store.dispatch({\n          type: 'SET_TAGS',\n          payload: res.tags,\n        })\n        break\n      }\n      case 'SystemError': {\n        store.dispatch({\n          type: 'SET_ERRORS',\n          payload: [res.message],\n        })\n        break\n      }\n    }\n  })\n}\n\nconst fetchPictures = async (store: Store<State, Action>) => {\n  return api.getPictures({}).then((res) => {\n    switch (res.type) {\n      case 'GetPicturesSuccess': {\n        store.dispatch({\n          type: 'SET_PICTURES',\n          payload: res.pictures,\n        })\n        break\n      }\n      case 'SystemError': {\n        store.dispatch({\n          type: 'SET_ERRORS',\n          payload: [res.message],\n        })\n        break\n      }\n    }\n  })\n}\n\nconst fetchNote = async (store: Store<State, Action>, name: string) => {\n  return api.getNote({ name }).then((res) => {\n    switch (res.type) {\n      case 'GetNoteSuccess': {\n        store.dispatch({\n          type: 'SET_NOTE',\n          payload: [name, res.note],\n        })\n        break\n      }\n      case 'NoteIsBroken': {\n        store.dispatch({\n          type: 'SET_ERRORS',\n          payload: [res.message],\n        })\n        break\n      }\n      case 'NoteNotExist': {\n        store.dispatch({\n          type: 'SET_ERRORS',\n          payload: [res.message],\n        })\n        break\n      }\n      case 'SystemError': {\n        store.dispatch({\n          type: 'SET_ERRORS',\n          payload: [res.message],\n        })\n        break\n      }\n    }\n  })\n}\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport { useSelector } from 'react-redux'\nimport { State, MetaData } from 'client'\n\nexport const SEO = () => {\n  const metadata = useSelector<State, MetaData>((state) => state.meta)\n\n  return (\n    <Helmet>\n      <title>{metadata.title}</title>\n      <meta name=\"theme-color\" content={'#d84136'} />\n      <meta name=\"description\" content={metadata.description} />\n      <meta name=\"image\" content={metadata.image} />\n    </Helmet>\n  )\n}\n","import React from 'react'\nimport { useHistory } from 'react-torch/client'\nimport { usePaths } from '@src/hook'\nimport { ThemeToggle, Github, Mail } from './index'\n\nexport const Header = () => {\n  const [paths] = usePaths()\n  const history = useHistory()\n  const _paths = paths.slice()\n  const tail = _paths.pop()\n\n  return (\n    <header className=\"header\">\n      <div className=\"header-box\">\n        <nav className=\"nav\">\n          {_paths.map((path) => {\n            const [name, href] = path\n            const handleClick = (\n              event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n            ) => {\n              history.push(href)\n              event.preventDefault()\n            }\n            return (\n              <span key={name}>\n                <a className=\"link\" href={href} onClick={handleClick}>\n                  /&nbsp;{name}&nbsp;&nbsp;\n                </a>\n              </span>\n            )\n          })}\n          {tail && (\n            <span className=\"tail text\" key={tail[0]}>\n              <span>/</span>\n              &nbsp;\n              <span>{tail[0]}</span>\n            </span>\n          )}\n        </nav>\n        <div className=\"operation\">\n          <a\n            href=\"https://github.com/tqma113\"\n            className=\"github\"\n            aria-label=\"Github\"\n            accessKey=\"g\"\n          >\n            <Github width={25} height={25} className=\"icon\" />\n          </a>\n          <a\n            href=\"mailto:mtq1997@126.com\"\n            className=\"mail\"\n            aria-label=\"Github\"\n            accessKey=\"m\"\n          >\n            <Mail width={25} height={25} className=\"icon\" />\n          </a>\n          <ThemeToggle />\n        </div>\n      </div>\n    </header>\n  )\n}\n","import React from 'react'\n\nexport const Footer = () => {\n  const year = new Date().getUTCFullYear()\n  return <footer className=\"footer text\">© {year}</footer>\n}\n","import React from 'react'\nimport { useStore } from 'react-redux'\nimport { Header, Footer, NotFound } from './index'\nimport type { State, Action } from 'client'\n\nexport type ContainerProps = React.PropsWithChildren<{}>\n\nexport const Container = ({ children }: ContainerProps) => {\n  const state = useStore<State, Action>().getState()\n\n  if (state.errors.length > 0) children = <>{state.errors}</>\n  if (state.notfound) children = <NotFound />\n\n  return (\n    <div className=\"container\">\n      <Header />\n      <main className=\"main\">{children}</main>\n      <Footer />\n    </div>\n  )\n}\n","import React from 'react'\nimport { useTheme } from '@src/hook'\n\nexport const ThemeToggle = () => {\n  const [mode, toggle] = useTheme()\n  return (\n    <button className=\"theme-toggle\" onClick={toggle} aria-label=\"Theme Toggle\">\n      <div className={mode}></div>\n    </button>\n  )\n}\n","import React from 'react'\nimport { useHistory } from 'react-torch/client'\n\nexport type LinkProps = React.PropsWithChildren<{\n  href: string\n  className?: string\n  style?: React.CSSProperties\n  accessKey?: string\n  onClick?: (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => void\n  blank?: true\n}>\n\nexport const Link = ({\n  href,\n  children,\n  style,\n  className,\n  onClick,\n  accessKey,\n  blank,\n}: LinkProps) => {\n  const history = useHistory()\n\n  const handleClick = (\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n  ) => {\n    if (!blank) {\n      history.push(href)\n      event.preventDefault()\n    }\n  }\n\n  return (\n    <a\n      className={`link ${className || ''}`}\n      href={href}\n      onClick={onClick || handleClick}\n      style={style}\n      accessKey={accessKey}\n      target={blank ? '_blank' : ''}\n    >\n      {children}\n    </a>\n  )\n}\n","import React from 'react'\nimport { useHistory } from 'react-torch/client'\n\nexport const NotFound = () => {\n  const history = useHistory()\n\n  const handleClick = (\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n  ) => {\n    history.push('/')\n    event.preventDefault()\n  }\n\n  return (\n    <div style={{ textAlign: 'center' }}>\n      <h1 style={{ fontSize: '32px', fontWeight: 650 }}>Page not found</h1>\n      <h1 style={{ fontSize: '100px', fontWeight: 650 }}>404</h1>\n      <p>\n        Back to{' '}\n        <a className=\"link\" href=\"/\" onClick={handleClick}>\n          Homepage\n        </a>\n        .\n      </p>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from './index'\n\nexport const BackToTop = () => {\n  const handleClick = (\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n  ) => {\n    window.scrollTo({ top: 0 })\n    event.preventDefault()\n  }\n\n  return (\n    <div className=\"back-to-top\">\n      <Link href=\"#top\" onClick={handleClick}>\n        ⇪ Back to top\n      </Link>\n    </div>\n  )\n}\n","import React from 'react'\n\nexport const Github = (props: React.SVGProps<SVGSVGElement>) => {\n  return (\n    <svg viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\" {...props}>\n      <path d=\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\" />\n    </svg>\n  )\n}\n","import React from 'react'\n\nexport const Mail = (props: React.SVGProps<SVGSVGElement>) => {\n  return (\n    <svg viewBox=\"64 64 896 896\" {...props}>\n      <path d=\"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-80.8 108.9L531.7 514.4c-7.8 6.1-18.7 6.1-26.5 0L189.6 268.9A7.2 7.2 0 01194 256h648.8a7.2 7.2 0 014.4 12.9z\" />\n    </svg>\n  )\n}\n","import { useState } from 'react'\nimport { useHistory } from 'react-torch/client'\n\ntype MetaData = {\n  title: string\n  description: string\n  language: string\n  image: string\n  author: string\n}\n\nconst defaultData: MetaData = {\n  title: 'Ma Tianqi(@tqma) - Software Engineer',\n  description: \"Ma Tianqi's personal website.\",\n  image: 'icons/icon-192x192.png',\n  language: 'en',\n  author: 'Ma Tianqi',\n}\n\nexport const useSiteMeta = () => {\n  const history = useHistory()\n  const [data, setData] = useState({\n    ...defaultData,\n    url: history.createHref(history.location),\n  })\n\n  const setMetaData = (_data: Partial<MetaData>) => {\n    setData({\n      ...data,\n      url: history.createHref(history.location),\n      ..._data,\n    })\n  }\n\n  return [data, setMetaData] as const\n}\n","import { useState, useEffect } from 'react'\n\nexport enum ThemeMode {\n  Dark = 'dark',\n  Light = 'light',\n}\n\nexport const useTheme = () => {\n  const [mode, setMode] = useState(ThemeMode.Light)\n  const [isFirst, setIsFirst] = useState(true)\n\n  useEffect(() => {\n    setMode(getThemeMode())\n    setIsFirst(false)\n  }, [])\n\n  useEffect(() => {\n    if (!isFirst && mode !== getThemeMode()) {\n      window.__setTheme(mode)\n    }\n  }, [mode])\n\n  const toggle = () => {\n    if (mode === ThemeMode.Light) {\n      setMode(ThemeMode.Dark)\n    } else {\n      setMode(ThemeMode.Light)\n    }\n  }\n\n  return [mode, toggle] as const\n}\n\nconst getThemeMode = (): ThemeMode => {\n  return localStorage.getItem(window.__theme_key__) === 'dark'\n    ? ThemeMode.Dark\n    : ThemeMode.Light\n}\n","export type Path = [string, string]\n\nlet paths: Path[] = []\nconst setPaths = (_paths: Path[]) => {\n  paths = _paths.slice()\n}\nexport const usePaths = (_paths?: Path[]) => {\n  if (_paths) {\n    paths = _paths.slice()\n  }\n  return [paths, setPaths] as const\n}\n","import React from 'react'\nimport { useStore } from 'react-redux'\nimport dayjs from 'dayjs'\nimport LazyLoad from 'react-lazyload'\nimport styled, { keyframes } from 'styled-components'\nimport { Link, BackToTop } from '@src/component'\nimport type { State, Action } from '@src/store'\nimport type { Picture } from 'type'\n\nimport './index.less'\n\nexport default function Photography() {\n  return (\n    <div className=\"photography\">\n      <div className=\"title-container\">\n        <h1 className=\"title\">Photography</h1>\n        <div className=\"link-container\">\n          <Link href=\"/photography/months\" className=\"link-with-underline\">\n            View all months\n          </Link>\n        </div>\n      </div>\n      <Photos />\n      <BackToTop />\n    </div>\n  )\n}\n\nfunction Photos() {\n  const store = useStore<State, Action>()\n  const pictures = store.getState().displayPictures\n  const years = Object.keys(pictures).sort((a, b) => Number(a) - Number(b))\n\n  return (\n    <div className=\"photos\">\n      {years.map((year) => {\n        return <PhotosByYear key={year} year={year} />\n      })}\n    </div>\n  )\n}\n\nfunction PhotosByYear({ year }: { year: string }) {\n  const store = useStore<State, Action>()\n  const pictures = store.getState().displayPictures[year]\n  const months = Object.keys(pictures).sort((a, b) => Number(a) - Number(b))\n\n  return (\n    <div className=\"photos-year\">\n      <h2 id={`year-${year}`}>\n        <a href={`#year-${year}`} className=\"link-with-underline\">\n          {year}\n        </a>\n      </h2>\n      {months.map((month) => {\n        return (\n          <PhotosByMonth key={`${year}-${month}`} year={year} month={month} />\n        )\n      })}\n    </div>\n  )\n}\n\nfunction PhotosByMonth({ year, month }: { year: string; month: string }) {\n  const store = useStore<State, Action>()\n  const pictures = store.getState().displayPictures[year][month]\n  const groupedPictures = groupPictures(pictures)\n\n  return (\n    <div className=\"photos-month\">\n      <h3 id={`month-${month}`}>\n        <a href={`#month-${month}`} className=\"link-with-underline\">\n          {month}\n        </a>\n      </h3>\n      <div className=\"photo-list\">\n        {groupedPictures.map((group) => {\n          if (Array.isArray(group)) {\n            return (\n              <DoublePhoto key={group[0].id} left={group[0]} right={group[1]} />\n            )\n          } else {\n            return <SinglePhoto key={group.id} picture={group} />\n          }\n        })}\n      </div>\n    </div>\n  )\n}\n\nfunction DoublePhoto({ left, right }: { left: Picture; right: Picture }) {\n  return (\n    <div className=\"double-photo\">\n      <Photo {...left} />\n      <Photo {...right} />\n    </div>\n  )\n}\n\nfunction SinglePhoto({ picture }: { picture: Picture }) {\n  return (\n    <div className=\"single-photo\">\n      <Photo {...picture} />\n    </div>\n  )\n}\nconst ImageWrapper = styled.div`\n  padding: 56.25% 0 0;\n  position: relative;\n`\n\nconst loadingAnimation = keyframes`\n  0% {\n    background-color: #fff;\n  }\n  50% {\n    background-color: #ccc;\n  }\n  100% {\n    background-color: #fff;\n  }\n`\n\nconst Placeholder = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  animation: ${loadingAnimation} 1s infinite;\n  width: 100%;\n`\n\nconst StyledImage = styled.img`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n`\n\nfunction Photo({ name, url, location, date }: Picture) {\n  const dateStr = dayjs(Number(date)).format('MMMM D, YYYY')\n  return (\n    <div className=\"photo\">\n      <LazyImage src={url} alt={name} />\n      <div className=\"title\">\n        <div className=\"title-content\">{name}</div>\n      </div>\n      <div className=\"info\">\n        <div className=\"location\">{location}</div>\n        <div className=\"date\">{dateStr}</div>\n      </div>\n    </div>\n  )\n}\n\nexport type LazyImageProps = {\n  src: string\n  alt: string\n}\nconst LazyImage = ({ src, alt }: LazyImageProps) => {\n  const refPlaceholder = React.useRef<HTMLDivElement | null>()\n\n  const removePlaceholder = () => {\n    refPlaceholder.current?.remove()\n  }\n\n  return (\n    <ImageWrapper>\n      {/** @ts-ignore */}\n      <Placeholder ref={refPlaceholder} />\n      <LazyLoad>\n        <StyledImage\n          onLoad={removePlaceholder}\n          onError={removePlaceholder}\n          src={src}\n          alt={alt}\n        />\n      </LazyLoad>\n    </ImageWrapper>\n  )\n}\n\ntype PictureGroup = [Picture, Picture]\n\nfunction groupPictures(pictures: Picture[]): (PictureGroup | Picture)[] {\n  const length = pictures.length\n  let result: (PictureGroup | Picture)[] = []\n\n  for (let i = 0; i + 1 < length; i = i + 2) {\n    result.push([pictures[i], pictures[i + 1]])\n  }\n\n  if (length % 2 === 1) {\n    result.push(pictures[length - 1])\n  }\n\n  return result\n}\n","import { createPage } from '@src/share'\nimport createStore from '@src/store'\nimport { usePaths } from '@src/hook'\nimport { fetchData } from '@src/api'\nimport View from './View'\n\nconst Home = createPage(async ({ params, context, history }) => {\n  usePaths([\n    ['me', '/'],\n    ['photography', '/'],\n  ])\n\n  const store = createStore()\n\n  const beforeCreate = async () => {\n    await fetchData(store, ['/pictures'], context)\n  }\n\n  const create = () => {\n    const state = store.getState()\n\n    const year = params?.year || params?.onlyYear\n    if (year) {\n      const picturesByYear = state.pictures[year]\n      if (picturesByYear) {\n        if (params?.month) {\n          const pictures = picturesByYear[params.month]\n          if (pictures) {\n            const displayNotes = {\n              [year]: {\n                [params.month]: pictures,\n              },\n            }\n            store.dispatch({\n              type: 'SET_DISPLAY_PICTURES',\n              payload: displayNotes,\n            })\n\n            usePaths([\n              ['me', '/'],\n              ['photography', '/photography'],\n              [year, `/photography/${year}`],\n              [params.month, `/photography/${year}/${params.month}`],\n            ])\n          } else {\n            history.push(`/photography/${year}`)\n          }\n        } else {\n          const displayNotes = {\n            [year]: picturesByYear,\n          }\n          store.dispatch({\n            type: 'SET_DISPLAY_PICTURES',\n            payload: displayNotes,\n          })\n\n          usePaths([\n            ['me', '/'],\n            ['photography', '/photography'],\n            [year, `/photography/${year}`],\n          ])\n        }\n      } else {\n        history.push(`/photography`)\n      }\n    } else {\n      store.dispatch({ type: 'SET_DISPLAY_PICTURES', payload: state.pictures })\n\n      usePaths([\n        ['me', '/'],\n        ['photography', '/photography'],\n      ])\n    }\n\n    return View\n  }\n\n  return { store, beforeCreate, create }\n})\n\nexport default Home\n","import React from 'react'\nimport { createPage as cp, createNoopStore } from 'react-torch/client'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { SEO, Container } from '../component'\nimport type {\n  StoreLike,\n  PageView,\n  CreaterProps,\n  PageCreater,\n} from 'react-torch/client'\nimport type { Store } from 'redux'\nimport type { Location } from 'torch-history'\n\nexport type LayoutProps = React.PropsWithChildren<{}>\n\nexport type BasePage = {\n  store?: Store<any, any> & StoreLike<any>\n\n  beforeCreate?: () => Promise<void> | void\n  create: () => Promise<PageView> | PageView\n  created?: () => Promise<void> | void\n  beforeDestory?: (nextLocation: Location) => Promise<void> | void\n  destroyed?: (nextLocation: Location) => Promise<void> | void\n}\n\nexport type Page = PageView | BasePage\n\nexport type StandardPage = Required<BasePage>\n\nexport type Creater = (props: CreaterProps) => Page | Promise<Page>\n\nconst noopStore = Object.assign(\n  createStore(() => {}),\n  createNoopStore()\n)\n\nconst noopPage = {\n  store: noopStore,\n  beforeCreate: () => {},\n  created: () => {},\n  beforeDestory: () => {},\n  destroyed: () => {},\n}\n\nconst standardizePage = (page: Page): StandardPage => {\n  if (isFunction(page)) {\n    return {\n      ...noopPage,\n      create: async () => page,\n    }\n  } else {\n    return {\n      ...noopPage,\n      ...page,\n    }\n  }\n}\n\nexport const createPage = (creater: Creater): PageCreater => {\n  return cp(async (props) => {\n    const {\n      store,\n      beforeCreate,\n      create,\n      beforeDestory,\n      destroyed,\n    } = standardizePage(await creater(props))\n\n    const Layout = ({ children }: LayoutProps) => {\n      return (\n        <Provider store={store}>\n          <SEO />\n          <Container>{children}</Container>\n        </Provider>\n      )\n    }\n\n    return {\n      store,\n      beforeCreate: () => {\n        if (!props.context.ssr) {\n          // @ts-ignore\n          store.dispatch({ type: 'SET_NOT_FOUND', payload: false })\n        }\n\n        return beforeCreate()\n      },\n      create: async () => {\n        const PageView = await create()\n        return () => (\n          <Layout>\n            <PageView />\n          </Layout>\n        )\n      },\n      beforeDestory,\n      destroyed,\n    }\n  })\n}\n\nfunction isFunction<Args, R, S>(\n  input: ((args: Args) => R) | S\n): input is (args: Args) => R {\n  return input && typeof input === 'function'\n}\n","import { createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport type { Note, Tag, Picture } from 'type'\n\nexport type MetaData = {\n  title: string\n  description: string\n  language: string\n  image: string\n  author: string\n}\n\nexport type State = {\n  errors: string[]\n  notes: Note[]\n  displayNotes: Note[]\n  tags: Tag[]\n  noteSet: Record<string, string>\n  notfound: boolean\n  meta: MetaData\n  pictures: Record<string, Record<string, Picture[]>>\n  displayPictures: Record<string, Record<string, Picture[]>>\n}\n\nconst initialState: State = {\n  errors: [],\n  notes: [],\n  displayNotes: [],\n  tags: [],\n  noteSet: {},\n  notfound: false,\n  meta: {\n    title: 'Ma Tianqi(@tqma) - Software Engineer',\n    description: \"Ma Tianqi's personal website.\",\n    image: 'icons/icon-192x192.png',\n    language: 'en',\n    author: 'Ma Tianqi',\n  },\n  pictures: {},\n  displayPictures: {},\n}\n\nconst UNSAFE_SETSTATE = 'UNSAFE_SETSTATE'\n\nconst SET_TAGS = 'SET_TAGS'\nconst SET_PICTURES = 'SET_PICTURES'\nconst SET_DISPLAY_PICTURES = 'SET_DISPLAY_PICTURES'\nconst SET_NOTES = 'SET_NOTES'\nconst SET_NOTE = 'SET_NOTE'\nconst SET_ERRORS = 'SET_ERRORS'\nconst SET_NOT_FOUND = 'SET_NOT_FOUND'\nconst SET_DISPLAY_NOTES = 'SET_DISPLAY_NOTES'\nconst SET_META_DATA = 'SET_META_DATA'\n\ntype UNSAFE_SETSTATE_ACTION = {\n  type: typeof UNSAFE_SETSTATE\n  payload: State\n}\n\ntype SET_TAGS_ACTION = {\n  type: typeof SET_TAGS\n  payload: Tag[]\n}\n\ntype SET_PICTURES_ACTION = {\n  type: typeof SET_PICTURES\n  payload: Record<string, Record<string, Picture[]>>\n}\n\ntype SET_DISPLAY_PICTURES_ACTION = {\n  type: typeof SET_DISPLAY_PICTURES\n  payload: Record<string, Record<string, Picture[]>>\n}\n\ntype SET_NOTES_ACTION = {\n  type: typeof SET_NOTES\n  payload: Note[]\n}\n\ntype SET_NOTE_ACTION = {\n  type: typeof SET_NOTE\n  payload: [string, string]\n}\n\ntype SET_ERRORS_ACTION = {\n  type: typeof SET_ERRORS\n  payload: string[]\n}\n\ntype SET_NOT_FOUND_ACTION = {\n  type: typeof SET_NOT_FOUND\n  payload: boolean\n}\n\ntype SET_DISPLAY_NOTES_ACTION = {\n  type: typeof SET_DISPLAY_NOTES\n  payload: Note[]\n}\n\ntype SET_META_DATA_ACTION = {\n  type: typeof SET_META_DATA\n  payload: Partial<MetaData>\n}\n\nexport type Action =\n  | UNSAFE_SETSTATE_ACTION\n  | SET_TAGS_ACTION\n  | SET_PICTURES_ACTION\n  | SET_DISPLAY_PICTURES_ACTION\n  | SET_NOTE_ACTION\n  | SET_NOTES_ACTION\n  | SET_ERRORS_ACTION\n  | SET_NOT_FOUND_ACTION\n  | SET_DISPLAY_NOTES_ACTION\n  | SET_META_DATA_ACTION\n\nconst reducer = (state: State = initialState, action: Action): State => {\n  switch (action.type) {\n    case 'UNSAFE_SETSTATE': {\n      return action.payload\n    }\n    case 'SET_TAGS': {\n      return {\n        ...state,\n        tags: action.payload,\n      }\n    }\n    case 'SET_PICTURES': {\n      return {\n        ...state,\n        pictures: action.payload,\n      }\n    }\n    case 'SET_DISPLAY_PICTURES': {\n      return {\n        ...state,\n        displayPictures: action.payload,\n      }\n    }\n    case 'SET_NOTE': {\n      const [key, value] = action.payload\n      return {\n        ...state,\n        noteSet: {\n          ...state.noteSet,\n          [key]: value,\n        },\n      }\n    }\n    case 'SET_NOTES': {\n      return {\n        ...state,\n        displayNotes: action.payload,\n        notes: action.payload,\n      }\n    }\n    case 'SET_ERRORS': {\n      return {\n        ...state,\n        errors: state.errors.concat(action.payload),\n      }\n    }\n    case 'SET_NOT_FOUND': {\n      return {\n        ...state,\n        notfound: action.payload,\n      }\n    }\n    case 'SET_DISPLAY_NOTES': {\n      return {\n        ...state,\n        displayNotes: action.payload,\n      }\n    }\n    case 'SET_META_DATA': {\n      return {\n        ...state,\n        meta: {\n          ...state.meta,\n          ...action.payload,\n        },\n      }\n    }\n  }\n\n  return state\n}\n\nexport default function () {\n  const reduxStore = createStore(reducer, initialState, composeWithDevTools())\n  return Object.assign(reduxStore, {\n    __UNSAFE_SET_STATE__(state: State) {\n      reduxStore.dispatch({ type: UNSAFE_SETSTATE, payload: state })\n    },\n  })\n}\n"],"sourceRoot":""}